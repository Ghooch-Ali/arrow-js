<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="ArrowJS Benchmarks" />
    <link rel="stylesheet" type="text/css" href="./benchmark.css" />
    <meta name = "viewport" content = "width=device-width, minimum-scale=1.0, maximum-scale = 1.0, user-scalable = no">
    <title>ArrowJS â€¢ Benchmarks</title>
  </head>
  <body>

    <!-- ARROW TEST -->
    <script type="module">
      import { reactive, html, nextTick } from '@src/index'
      import { buildData } from './utils'
      const results = document.getElementById('result')

      const data = reactive({
        rows: []
      })

      document.getElementById('run').addEventListener('click', async () => {
        const start = performance.now()
        data.rows = buildData(10000)
        mount(document.getElementById('arrow'))
        await nextTick()
        const end = performance.now()
        results.innerText = `${end - start}ms`
      })

      const mount = html`
        <ul>
          ${() => data.rows.map(row => html`<li class="${() => row.id === data.selected ? 'danger' : false}">
              <div class="col-md-1">${() => row.id }</div>
                <div class="col-md-4">
                  <a @click="${() => {data.selected = row.id}}">${() => row.label }</a>
                </div>
                <div class="col-md-1">
                  <a @click="${() => remove(row.id)}">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                  </a>
                </div>
                <div class="col-md-6"></div>
            <li>`)}
        </ul>
      `
    </script>





    <!-- NATIVE TEST -->
    <div class="benchmark-panel">
      <h2>Arrow</h2>
      <button id="run">Create 1000 rows</button>
      <div class="results">
        Results: <span id="result"></span>
      </div>
      <h2>Native</h2>
      <button id="run-native">Create 1000 rows</button>
      <div class="results">
        Results: <span id="result-native"></span>
      </div>
    </div>
    <div id="arrow"></div>
    <script type="module">
      import { buildData } from './utils'
      const ul = document.createElement('ul')
      document.getElementById('arrow').appendChild(ul)
      const results2 = document.getElementById('result-native')
      document.getElementById('run-native').addEventListener('click', async () => {
        const start = performance.now()
        ul.innerHTML = buildData(10000).reduce((html, row) => {
          return html += `<li class="foo">
              <div class="col-md-1">${row.id }</div>
                <div class="col-md-4">
                  <a>${row.label}</a>
                </div>
                <div class="col-md-1">
                  <a>
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                  </a>
                </div>
                <div class="col-md-6"></div>
            <li>`
        }, '')
        const end = performance.now()
        results2.innerText = `${end - start}ms`
      })
    </script>
  </body>
</html>
